@model hyperTROPHYbuddy.Models.HealthReportInputModel

@{
    ViewData["Title"] = "Health Report";
    var activityLevels = (Dictionary<string, string>)ViewBag.ActivityLevels;
}

<h2>Get Your Health Report</h2>

<form asp-action="Index" method="post" class="form-horizontal">
    <div class="form-group">
        <label asp-for="Weight">Weight (kg):</label>
        <input asp-for="Weight" class="form-control" type="text" />
        <small class="form-text text-muted">You can use "." or "," as the decimal separator.</small>
        <span asp-validation-for="Weight" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Height">Height (cm):</label>
        <input asp-for="Height" class="form-control" />
        <span asp-validation-for="Height" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Age">Age:</label>
        <input asp-for="Age" class="form-control" />
        <span asp-validation-for="Age" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Gender">Gender:</label>
        <select asp-for="Gender" class="form-control">
            <option value="">Select...</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
        </select>
        <span asp-validation-for="Gender" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="ActivityLevel">Activity Level:</label>
        <select asp-for="ActivityLevel" class="form-control">
            <option value="">Select...</option>
            @foreach (var kvp in activityLevels)
            {
                <option value="@kvp.Key" selected="@(Model.ActivityLevel == kvp.Key ? "selected" : null)">@kvp.Value</option>
            }
        </select>
        <span asp-validation-for="ActivityLevel" class="text-danger"></span>
    </div>
    <button type="submit" class="btn btn-primary">Calculate</button>
</form>

@if (ViewBag.Result != null)
{
    var result = (hyperTROPHYbuddy.Models.HealthReportResultModel)ViewBag.Result;
    <hr />
    <div class="alert alert-success">
        <h4>Your Health Report</h4>
        <p><strong>BMI:</strong> @result.BMI (@result.BMICategory)</p>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Goal</th>
                    <th>Daily Calories</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Maintain Weight</td><td>@result.MaintainCalories kcal</td></tr>
                <tr><td>Mild Weight Loss (−0.25 kg/week)</td><td>@result.MildLossCalories kcal</td></tr>
                <tr><td>Weight Loss (−0.5 kg/week)</td><td>@result.LossCalories kcal</td></tr>
                <tr><td>Mild Weight Gain (+0.25 kg/week)</td><td>@result.MildGainCalories kcal</td></tr>
                <tr><td>Weight Gain (+0.5 kg/week)</td><td>@result.GainCalories kcal</td></tr>
            </tbody>
        </table>
    </div>
}

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}